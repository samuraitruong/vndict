(this.webpackJsonpvndict=this.webpackJsonpvndict||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=a(43),i=a(84),u=a(159),s=a(158),m=Object(i.a)(),p=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null),r.a.createElement(u.a,{theme:m},t))},d=a(160),f=a(162),E=a(163),b=a(46),h=a(70),v=a.n(h),g=function(){return r.a.createElement(d.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(E.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(v.a,null)),r.a.createElement(b.a,{variant:"h6"},"Vietnamese - English open dictionary")))},k=a(15),O=a.n(k),j=a(27),w=a(16),y=a(68),C=a(182),S=a(165),x=a(126),R=a(166),L=a(167),_=a(73),T=a.n(_),N=a(176),U=a(164),B=function(e){var t=e.suggests,a=e.setKeyword,n=e.search,c=I({successtionBox:{paddingTop:"25px"}});return t&&t.length>0&&r.a.createElement(N.a,{className:c.suggestList},r.a.createElement(U.a,null),r.a.createElement(b.a,{variant:"h3",component:"h5",style:{marginTop:"25px"}},"T\u1eeb li\xean quan:"),r.a.createElement(S.a,{component:"nav","aria-label":"contacts"},t.map((function(e){return r.a.createElement(x.a,{key:e.word,button:!0,onClick:function(){a(e.word),n(e.word)}},r.a.createElement(R.a,null,r.a.createElement(T.a,null)),r.a.createElement(L.a,{primary:e.word,color:"primary"}))}))))},I=Object(y.a)((function(e){return{suggestList:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(5)}}})),A=a(169),D=a(86),W=a(178),K=a(174),V=a(77),M=a.n(V),P=a(78),q=a.n(P),z=a(173),H=a(183),J=a(80),X=a.n(J),G=a(81),F=a.n(G),$=a(82),Z=a.n($),Q=a(58),Y=a.n(Q),ee=a(79),te=a.n(ee);function ae(e){var t=e.html,a=e.onLinkClick,c=e.onWordClick,o=Object(n.useRef)(null),l=Object(n.useRef)([]),i=Object(n.useCallback)((function(){var e="",t=document;window.getSelection?e=window.getSelection().toString():t.selection&&"Control"!==t.selection.type&&(e=t.selection.createRange().text),e&&c&&c(e)}),[c]),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=Object(n.useState)(!1),r=Object(w.a)(a,2),c=r[0],o=r[1];Object(n.useEffect)((function(){var a;return c?a=setTimeout(e,t):clearTimeout(a),function(){clearTimeout(a)}}),[c]);var l=Object(n.useCallback)((function(){o(!0)}),[]),i=Object(n.useCallback)((function(){o(!1)}),[]);return{onMouseDown:l,onMouseUp:i,onMouseLeave:i,onTouchStart:l,onTouchEnd:i}}((function(){i()}),1e3);return Object(n.useEffect)((function(){return l.current.push(o.current),o.current.addEventListener("dblclick",i),Array.from(o.current.querySelectorAll("a")).forEach((function(e){e.addEventListener("click",a),l.current.push(e)})),function(){l.current.forEach((function(e){e.removeEventListener("click",a),e.removeEventListener("dblclick",i)})),l.current=[]}}),[t,a,c,i]),r.a.createElement(b.a,Object.assign({},u,{ref:o,variant:"body1",component:"article",dangerouslySetInnerHTML:{__html:t}}))}var ne=a(28),re=a(168),ce=a(181);function oe(e){return e?e=e[0].toUpperCase()+e.substr(1):null}function le(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(j.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"HEAD"});case 3:if(!(a=e.sent)||!a.ok){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var ue,se=a(180),me=a(74),pe=a.n(me),de={RESOURCE_URL:Object({NODE_ENV:"production",PUBLIC_URL:"/vndict"}).REACT_APP_RESOURCE_URL||"https://samuraitruong.github.io/open-vn-en-dict",DATA_SOURCE_ID:["data","html"],TRACKING_SERVICE_URL:"https://us-central1-vndict-http.cloudfunctions.net/track"},fe=de,Ee=Object(y.a)((function(e){return Object(C.a)({speakButton:{marginLeft:e.spacing(3)}})})),be=function(e){var t=e.noStyle,a=e.word,c=e.accents,o=Ee({}),l=Object(n.useState)({}),i=Object(w.a)(l,2),u=i[0],s=i[1],m=Object(n.useCallback)(Object(j.a)(O.a.mark((function e(){var t,n,r,o,l,i,u,m;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!a){e.next=31;break}n=!0,r=!1,o=void 0,e.prev=5,l=c[Symbol.iterator]();case 7:if(n=(i=l.next()).done){e.next=17;break}return u=i.value,m="".concat(de.RESOURCE_URL,"/voice/").concat(a.toLocaleLowerCase(),"_").concat(u,".mp3"),e.next=12,le(m);case 12:e.sent&&(t[u]=m);case 14:n=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),r=!0,o=e.t0;case 23:e.prev=23,e.prev=24,n||null==l.return||l.return();case 26:if(e.prev=26,!r){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:s(t);case 32:case"end":return e.stop()}}),e,null,[[5,19,23,31],[24,,26,30]])}))),[a]);Object(n.useEffect)((function(){m()}),[m]);return r.a.createElement(N.a,{className:"float-right"},c.map((function(e){return r.a.createElement(se.a,{key:e,className:o.speakButton,clickable:null!=u[e],disabled:!u[e],color:t||"us"!==e?"primary":"secondary",onClick:function(){return function(e){var t="".concat(de.RESOURCE_URL,"/voice/").concat(a.toLocaleLowerCase(),"_").concat(e,".mp3");new Audio(t).play()}(e)},icon:r.a.createElement(pe.a,null),label:e.toUpperCase()})})))},he=be,ve=Object(y.a)((function(e){return Object(C.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},innerBox:{padding:e.spacing(2)}})})),ge=function(e){var t=e.word,a=e.onClose,n=ve({}),c=r.a.forwardRef((function(e,t){return r.a.createElement(re.a,Object.assign({direction:"up",ref:t},e))}));return t?r.a.createElement(ce.a,{fullScreen:window.innerWidth<667,open:null!=t,onClose:function(){},TransitionComponent:c},r.a.createElement(d.a,{className:n.appBar},r.a.createElement(f.a,null,r.a.createElement(E.a,{edge:"start",color:"inherit",onClick:function(){return a()},"aria-label":"close"},r.a.createElement(Y.a,null)),r.a.createElement(b.a,{variant:"h6",className:n.title},oe(t.word)," ",t.pronounce&&r.a.createElement("span",null," - ",t.pronounce)),r.a.createElement(he,{word:t.word,accents:["us","uk"],noStyle:!0}))),r.a.createElement(N.a,{className:n.innerBox},r.a.createElement(ae,{html:t.content,onLinkClick:function(e){e.preventDefault()}}))):null};function ke(e,t){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(j.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=a||t,e.prev=1,e.next=4,fetch(fe.TRACKING_SERVICE_URL,{method:"POST",mode:"no-cors",body:JSON.stringify({word:t,mean:a})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function je(e,t){return we.apply(this,arguments)}function we(){return(we=Object(j.a)(O.a.mark((function e(t,a){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=a||"html",n={resultType:ue.Success},e.prev=2,t=t.toLocaleLowerCase().trim(),e.next=6,fetch("".concat(de.RESOURCE_URL,"/").concat(a,"/").concat(t,".json"));case 6:return r=e.sent,e.next=9,r.text();case 9:if(c=(c=e.sent).replace(/find\?type=(\d+)&amp;query=([^"]*)/gi,"$2"),n.data=JSON.parse(c),0!==Object.keys(n.data).length){e.next=14;break}throw new Error("Word data is empty");case 14:ke(t),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0),n.resultType=ue.Error,n.errorMessage="failed to fetch word";case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}!function(e){e.Success="success",e.Error="error"}(ue||(ue={}));var ye=a(179),Ce=a(172);var Se=a(170),xe=a(171),Re=Object(y.a)((function(e){return Object(C.a)({liveSearchWord:{margin:e.spacing(1)},liveSearchContainer:{marginTop:e.spacing(2)}})})),Le=function(e){var t=e.onWordClick,a=function(){var e=r.a.useState(!1),t=Object(w.a)(e,2),a=t[0],c=t[1],o=r.a.useState(!0),i=Object(w.a)(o,2),u=i[0],s=i[1],m=r.a.useState({}),p=Object(w.a)(m,2),d=p[0],f=p[1];return Object(n.useEffect)((function(){try{var e=l.database().ref("/");return console.log("ref"),e.on("value",(function(e){s(!1),f(e.val()),console.log(e.val())})),function(){e.off("value")}}catch(t){c(!0)}}),[]),{error:a,loading:u,trackData:d}}(),c=a.trackData,o=a.error,i=a.loading,u=Re({});return r.a.createElement(A.a,{className:u.liveSearchContainer},r.a.createElement(b.a,{variant:"h5",color:"primary"},"T\xecm ki\u1ebfm g\u1ea7n nh\u1ea5t ...."),Object.keys(c).map((function(e){return r.a.createElement(Se.a,{in:!0},r.a.createElement(se.a,{label:e,className:u.liveSearchWord,clickable:!0,onClick:function(){return t(e)},size:"small",color:"primary"}))})),i&&r.a.createElement(xe.a,{color:"secondary"}),o&&r.a.createElement("span",null,"Xin l\u1ed7i, \u0111\xe3 x\xe3y ra l\u1ed7i k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7, vui l\xf2ng th\u1eed l\u1ea1i sau."))},_e=Object(y.a)((function(e){return Object(C.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:1,marginTop:e.spacing(1)},container:{margin:e.spacing(1,0),paddingTop:e.spacing(2)},speakButton:{marginLeft:e.spacing(3)},snackbar:{backgroundColor:e.palette.error.dark}})})),Te=function(){var e=localStorage.getItem("SOURCE_ID")||"html",t=Object(ne.f)(),a=_e({}),c=Object(n.useState)(e),o=Object(w.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(),s=Object(w.a)(u,2),m=s[0],p=s[1],d=Object(n.useState)(null),f=Object(w.a)(d,2),h=f[0],v=f[1],g=Object(n.useState)(""),k=Object(w.a)(g,2),y=k[0],C=k[1],S=Object(n.useState)("en_vn"),x=Object(w.a)(S,2),R=x[0],L=x[1],_=Object(n.useState)(null),T=Object(w.a)(_,2),I=T[0],V=T[1],P=Object(ne.g)().word,J=Object(n.useState)(!0),G=Object(w.a)(J,2),$=G[0],Q=G[1],ee=Object(n.useCallback)(function(){var e=Object(j.a)(O.a.mark((function e(a){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,je(a,l);case 4:n=e.sent,(r=n.data)?(Q(!1),L("en_vn"),p(r),V(null),t.push(a),window.scrollTo({top:0})):(Q(!0),p({}),V("Xin l\u1ed7i, t\u1eeb b\u1ea1n t\xecm ki\u1ebfm kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c ch\u01b0a \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,l]),re=function(){var e=Object(j.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,l);case 2:(a=e.sent).data&&a.data.en_vn&&a.data.en_vn.data&&v(a.data.en_vn.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){C(P),ee(P)}),[P,ee]);var ce=m&&m[R],le=r.a.useState(null),ie=Object(w.a)(le,2),ue=ie[0],se=ie[1],me=function(e){fe.DATA_SOURCE_ID.some((function(t){return t===e}))&&(localStorage.setItem("SOURCE_ID",e),i(e)),se(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{container:!0,className:a.container},r.a.createElement(A.a,{item:!0,sm:6,xs:12},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),ee(y),!1}},r.a.createElement(D.a,{className:a.root},r.a.createElement(E.a,{className:a.iconButton,"aria-label":"menu",onClick:function(e){se(e.currentTarget)}},r.a.createElement(M.a,null)),r.a.createElement(ye.a,{anchorEl:ue,keepMounted:!0,open:Boolean(ue),onClose:me},r.a.createElement(Ce.a,{disabled:"html"===l,onClick:function(){return me("html")}},"T\u1eeb \u0111i\u1ec3n 1"),r.a.createElement(Ce.a,{disabled:"data"===l,onClick:function(){return me("data")}},"T\u1eeb \u0111i\u1ec3n 2")),r.a.createElement(W.a,{value:y,onChange:function(e){return C(e.target.value)},className:a.input,placeholder:"English -> Vietnamese",inputProps:{"aria-label":"English -> Vietnamese"}}),r.a.createElement(E.a,{type:"submit",className:a.iconButton,"aria-label":"search"},r.a.createElement(q.a,null)),r.a.createElement(U.a,{className:a.divider,orientation:"vertical"}),r.a.createElement(E.a,{color:"primary",className:a.iconButton,"aria-label":"directions",onClick:function(){Q(!0),C(""),p(null),t.push("/")}},r.a.createElement(te.a,null))))),r.a.createElement(A.a,{item:!0,sm:6,xs:12},r.a.createElement(H.a,{value:R,exclusive:!0,onChange:function(e,t){L(t)},style:{float:"right"},"aria-label":"select dictionary options"},r.a.createElement(z.a,{value:"en_vn","aria-label":"left aligned"},r.a.createElement(X.a,null)," Eng -> Vi \xa0"),r.a.createElement(z.a,{value:"en_en","aria-label":"centered"},r.a.createElement(F.a,null)," Eng -> Eng \xa0"),r.a.createElement(z.a,{value:"synonyms","aria-label":"right aligned"},r.a.createElement(Z.a,null)," \u0110\u1ed3ng Ngh\u0129a")))),ce&&r.a.createElement(A.a,null,r.a.createElement(A.a,{xs:12,item:!0},r.a.createElement(b.a,{variant:"h3",component:"span"},ce.data?oe(ce.data.word):""),r.a.createElement(b.a,{variant:"h4",component:"span"},r.a.createElement(N.a,{color:"text.secondary",component:"span"},ce.data&&ce.data.pronounce?"  (".concat(ce.data.pronounce,")"):"")),r.a.createElement(be,{word:ce.data.word,accents:["uk","us"],noStyle:!1}),r.a.createElement(U.a,{className:a.divider}),r.a.createElement(ae,{html:ce.data&&ce.data.content,onWordClick:re,onLinkClick:function(e){e.preventDefault();var t=e.currentTarget.href.split("/"),a=t[t.length-1];C(a),ee(a)}}),h&&r.a.createElement(ge,{word:h,onClose:function(){return v(null)}}),ce.suggests&&r.a.createElement(A.a,null,r.a.createElement(B,{suggests:ce.suggests,setKeyword:C,search:ee})))),I&&r.a.createElement(K.a,{className:a.snackbar,message:I,action:r.a.createElement(E.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){return V(null)}},r.a.createElement(Y.a,null))}),$&&r.a.createElement(Le,{onWordClick:function(e){return ee(e)}}))},Ne=a(175),Ue=a(83),Be=function(){return r.a.createElement(Ue.a,{basename:"/vndict"},r.a.createElement(p,null,r.a.createElement(Ne.a,{fixed:!0,className:"container-wrapper"},r.a.createElement(g,null),r.a.createElement(Ne.a,null,r.a.createElement(ne.c,null,r.a.createElement(ne.a,{path:"/:word"},r.a.createElement(Te,null)),r.a.createElement(ne.a,{path:""},r.a.createElement(Te,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(123);l.initializeApp({apiKey:"AIzaSyC0Afu4UrdUxEXpZSNtTX5dqB7Kiz9h-58",authDomain:"vndict-http.firebaseapp.com",databaseURL:"https://vndict-http.firebaseio.com",projectId:"vndict-http",storageBucket:"vndict-http.appspot.com",messagingSenderId:"395495785689",appId:"1:395495785689:web:becd3318f899758373aac8",measurementId:"G-27K3H2BHSN"}),l.analytics(),o.a.render(r.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},97:function(e,t,a){e.exports=a(124)}},[[97,1,2]]]);
//# sourceMappingURL=main.39e77958.chunk.js.map