(this.webpackJsonpvndict=this.webpackJsonpvndict||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),l=n(45),i=n(86),u=n(161),s=n(160),m=Object(i.a)(),p=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null),r.a.createElement(u.a,{theme:m},t))},f=n(162),d=n(164),E=n(165),b=n(39),h=n(71),g=n.n(h),v=function(){return r.a.createElement(f.a,{position:"static"},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(g.a,null)),r.a.createElement(b.a,{variant:"h6"},"Vietnamese - English open dictionary")))},k=n(16),O=n.n(k),j=n(28),w=n(14),S=n(69),y=n(185),C=n(167),x=n(128),R=n(168),L=n(169),N=n(74),_=n.n(N),T=n(179),U=n(166),B=function(e){var t=e.suggests,n=e.setKeyword,a=e.search,c=I({successtionBox:{paddingTop:"25px"}});return t&&t.length>0&&r.a.createElement(T.a,{className:c.suggestList},r.a.createElement(U.a,null),r.a.createElement(b.a,{variant:"h3",component:"h5",style:{marginTop:"25px"}},"T\u1eeb li\xean quan:"),r.a.createElement(C.a,{component:"nav","aria-label":"contacts"},t.map((function(e){return r.a.createElement(x.a,{key:e.word,button:!0,onClick:function(){n(e.word),a(e.word)}},r.a.createElement(R.a,null,r.a.createElement(_.a,null)),r.a.createElement(L.a,{primary:e.word,color:"primary"}))}))))},I=Object(S.a)((function(e){return{suggestList:{backgroundColor:e.palette.background.paper,marginTop:e.spacing(5)}}})),A=n(171),D=n(88),W=n(181),V=n(176),K=n(78),M=n.n(K),q=n(80),z=n.n(q),P=n(175),F=n(186),H=n(82),J=n.n(H),X=n(83),G=n.n(X),$=n(84),Z=n.n($),Q=n(59),Y=n.n(Q),ee=n(81),te=n.n(ee);function ne(e){var t=e.html,n=e.onLinkClick,c=e.onWordClick,o=Object(a.useRef)(null),l=Object(a.useRef)([]),i=Object(a.useCallback)((function(){var e="",t=document;window.getSelection?e=window.getSelection().toString():t.selection&&"Control"!==t.selection.type&&(e=t.selection.createRange().text),e&&c&&c(e)}),[c]),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=Object(a.useState)(!1),r=Object(w.a)(n,2),c=r[0],o=r[1];Object(a.useEffect)((function(){var n;return c?n=setTimeout(e,t):clearTimeout(n),function(){clearTimeout(n)}}),[c]);var l=Object(a.useCallback)((function(){o(!0)}),[]),i=Object(a.useCallback)((function(){o(!1)}),[]);return{onMouseDown:l,onMouseUp:i,onMouseLeave:i,onTouchStart:l,onTouchEnd:i}}((function(){i()}),1e3);return Object(a.useEffect)((function(){return l.current.push(o.current),o.current.addEventListener("dblclick",i),Array.from(o.current.querySelectorAll("a")).forEach((function(e){e.addEventListener("click",n),l.current.push(e)})),function(){l.current.forEach((function(e){e.removeEventListener("click",n),e.removeEventListener("dblclick",i)})),l.current=[]}}),[t,n,c,i]),r.a.createElement(b.a,Object.assign({},u,{ref:o,variant:"body1",component:"article",dangerouslySetInnerHTML:{__html:t}}))}var ae=n(29),re=n(170),ce=n(184);function oe(e){return e?e=e[0].toUpperCase()+e.substr(1):null}function le(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(j.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"HEAD"});case 3:if(!(n=e.sent)||!n.ok){e.next=6;break}return e.abrupt("return",!0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ue(e){var t=[];return"s"===e[e.length-1]&&t.push(e.substr(0,e.length-1)),t}var se,me=n(183),pe=n(75),fe=n.n(pe),de={RESOURCE_URL:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_RESOURCE_URL||"https://data.en2vi.com/",DATA_SOURCE_ID:["data","html"],TRACKING_SERVICE_URL:"https://us-central1-vndict-http.cloudfunctions.net/track"},Ee=de,be=Object(S.a)((function(e){return Object(y.a)({speakButton:{marginLeft:e.spacing(3)}})})),he=function(e){var t=e.noStyle,n=e.word,c=e.accents,o=be({}),l=Object(a.useState)({}),i=Object(w.a)(l,2),u=i[0],s=i[1],m=Object(a.useCallback)(Object(j.a)(O.a.mark((function e(){var t,a,r,o,l,i,u,m;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!n){e.next=31;break}a=!0,r=!1,o=void 0,e.prev=5,l=c[Symbol.iterator]();case 7:if(a=(i=l.next()).done){e.next=17;break}return u=i.value,m="".concat(de.RESOURCE_URL,"/voice/").concat(n.toLocaleLowerCase(),"_").concat(u,".mp3"),e.next=12,le(m);case 12:e.sent&&(t[u]=m);case 14:a=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),r=!0,o=e.t0;case 23:e.prev=23,e.prev=24,a||null==l.return||l.return();case 26:if(e.prev=26,!r){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:s(t);case 32:case"end":return e.stop()}}),e,null,[[5,19,23,31],[24,,26,30]])}))),[n]);Object(a.useEffect)((function(){m()}),[m]);return r.a.createElement(T.a,{className:"float-right"},c.map((function(e){return r.a.createElement(me.a,{key:e,className:o.speakButton,clickable:null!=u[e],disabled:!u[e],color:t||"us"!==e?"primary":"secondary",onClick:function(){return function(e){var t="".concat(de.RESOURCE_URL,"/voice/").concat(n.toLocaleLowerCase(),"_").concat(e,".mp3");new Audio(t).play()}(e)},icon:r.a.createElement(fe.a,null),label:e.toUpperCase()})})))},ge=he,ve=Object(S.a)((function(e){return Object(y.a)({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},innerBox:{padding:e.spacing(2)}})})),ke=function(e){var t=e.word,n=e.onClose,a=ve({}),c=r.a.forwardRef((function(e,t){return r.a.createElement(re.a,Object.assign({direction:"up",ref:t},e))}));return t?r.a.createElement(ce.a,{fullScreen:window.innerWidth<667,open:null!=t,onClose:function(){},TransitionComponent:c},r.a.createElement(f.a,{className:a.appBar},r.a.createElement(d.a,null,r.a.createElement(E.a,{edge:"start",color:"inherit",onClick:function(){return n()},"aria-label":"close"},r.a.createElement(Y.a,null)),r.a.createElement(b.a,{variant:"h6",className:a.title},oe(t.word)," ",t.pronounce&&r.a.createElement("span",null," - ",t.pronounce)),r.a.createElement(ge,{word:t.word,accents:["us","uk"],noStyle:!0}))),r.a.createElement(T.a,{className:a.innerBox},r.a.createElement(ne,{html:t.content,onLinkClick:function(e){e.preventDefault()}}))):null};function Oe(e,t){return je.apply(this,arguments)}function je(){return(je=Object(j.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||t,e.prev=1,e.next=4,fetch(Ee.TRACKING_SERVICE_URL,{method:"POST",mode:"no-cors",body:JSON.stringify({word:t,mean:n})});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function we(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(j.a)(O.a.mark((function e(t,n){var a,r,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||"html",a={resultType:se.Success},e.prev=2,t=t.toLocaleLowerCase().trim(),e.next=6,fetch("".concat(de.RESOURCE_URL,"/").concat(n,"/").concat(t,".json"));case 6:return r=e.sent,e.next=9,r.text();case 9:if(c=(c=e.sent).replace(/find\?type=(\d+)&amp;query=([^"]*)/gi,"$2"),a.data=JSON.parse(c),0!==Object.keys(a.data).length){e.next=14;break}throw new Error("Word data is empty");case 14:Oe(t),e.next=24;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0),(o=ue(t)).length>0&&(a.suggestions=o),a.resultType=se.Error,a.errorMessage="failed to fetch word";case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}!function(e){e.Success="success",e.Error="error"}(se||(se={}));var ye=n(182),Ce=n(174),xe=n(177);var Re=n(172),Le=n(173),Ne=Object(S.a)((function(e){return Object(y.a)({liveSearchWord:{margin:e.spacing(1)},liveSearchContainer:{marginTop:e.spacing(2)}})})),_e=function(e){var t=e.onWordClick,n=function(){var e=r.a.useState(!1),t=Object(w.a)(e,2),n=t[0],c=t[1],o=r.a.useState(!0),i=Object(w.a)(o,2),u=i[0],s=i[1],m=r.a.useState({}),p=Object(w.a)(m,2),f=p[0],d=p[1];return Object(a.useEffect)((function(){try{var e=l.database().ref("/");return console.log("ref"),e.on("value",(function(e){s(!1),d(e.val()),console.log(e.val())})),function(){e.off("value")}}catch(t){c(!0)}}),[]),{error:n,loading:u,trackData:f}}(),c=n.trackData,o=n.error,i=n.loading,u=Ne({});return r.a.createElement(A.a,{className:u.liveSearchContainer},r.a.createElement(b.a,{variant:"h5",color:"primary"},"T\xecm ki\u1ebfm g\u1ea7n nh\u1ea5t ...."),Object.keys(c).map((function(e){return r.a.createElement(Re.a,{in:!0,key:e},r.a.createElement(me.a,{label:e,className:u.liveSearchWord,clickable:!0,onClick:function(){return t(e)},size:"small",color:"primary"}))})),i&&r.a.createElement(Le.a,{color:"secondary"}),o&&r.a.createElement("span",null,"Xin l\u1ed7i, \u0111\xe3 x\xe3y ra l\u1ed7i k\u1ebft n\u1ed1i v\u1edbi m\xe1y ch\u1ee7, vui l\xf2ng th\u1eed l\u1ea1i sau."))},Te=window,Ue=Te.webkitSpeechRecognition||Te.mozSpeechRecognition||Te.msSpeechRecognition||Te.oSpeechRecognition||Te.SpeechRecognition,Be=Ue&&new Ue,Ie=function(e,t){var n=null!==Ue&&void 0!==Ue,r=Object(a.useState)(""),c=Object(w.a)(r,2),o=c[0],l=c[1],i=Object(a.useState)(!1),u=Object(w.a)(i,2),s=u[0],m=u[1],p=Object(a.useCallback)((function(){Be&&(Be.continuous=!1,Be.interimResults=!1,Be.lang="en-US",Be.onresult=function(t){l(t.results[0][0].transcript),e(t.results[0][0].transcript),Be.stop()},Be.onaudiostart=function(){t&&t(),m(!0)},Be.onend=function(){m(!1)},Be.onerror=function(e){Be.stop()})}),[e,t]);return Object(a.useEffect)((function(){return p(),function(){Be&&s&&Be.stop()}}),[p,s]),{started:s,inputValue:o,startVoiceInput:function(){Be&&Be.start()},isBrowserSupportSpeech:n}},Ae=n(79),De=n.n(Ae),We=Object(S.a)((function(e){return Object(y.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:1,marginTop:e.spacing(1)},container:{margin:e.spacing(1,0),paddingTop:e.spacing(2)},speakButton:{marginLeft:e.spacing(3)},snackbar:{backgroundColor:e.palette.error.dark}})})),Ve=function(){var e=localStorage.getItem("SOURCE_ID")||"html",t=Object(ae.f)(),n=We({}),c=Object(a.useState)(e),o=Object(w.a)(c,2),l=o[0],i=o[1],u=Object(a.useState)(),s=Object(w.a)(u,2),m=s[0],p=s[1],f=Object(a.useState)(null),d=Object(w.a)(f,2),h=d[0],g=d[1],v=Object(a.useState)(""),k=Object(w.a)(v,2),S=k[0],y=k[1],C=Object(a.useState)([]),x=Object(w.a)(C,2),R=x[0],L=x[1],N=Object(a.useState)("en_vn"),_=Object(w.a)(N,2),I=_[0],K=_[1],q=Object(a.useState)(null),H=Object(w.a)(q,2),X=H[0],$=H[1],Q=Object(ae.g)().word,ee=Object(a.useState)(!0),re=Object(w.a)(ee,2),ce=re[0],le=re[1],ie=Object(a.useCallback)(function(){var e=Object(j.a)(O.a.mark((function e(n){var a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,we(n,l);case 4:a=e.sent,r=a.data,c=a.suggestions,console.log("suggestions",c),r?(le(!1),K("en_vn"),p(r),$(null),t.push(n),window.scrollTo({top:0})):(le(!0),p({}),L(c),$("Xin l\u1ed7i, t\u1eeb b\u1ea1n t\xecm ki\u1ebfm kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c ch\u01b0a \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,l]),ue=Object(a.useCallback)((function(e){y(e),ie(e)}),[ie]),se=Object(a.useCallback)((function(){y("")}),[]),me=Ie(ue,se),pe=me.isBrowserSupportSpeech,fe=me.startVoiceInput,de=me.started,be=function(){var e=Object(j.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t,l);case 2:(n=e.sent).data&&n.data.en_vn&&n.data.en_vn.data&&g(n.data.en_vn.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){y(Q),ie(Q)}),[Q,ie]);var ge=m&&m[I],ve=r.a.useState(null),Oe=Object(w.a)(ve,2),je=Oe[0],Se=Oe[1],Re=function(e){Ee.DATA_SOURCE_ID.some((function(t){return t===e}))&&(localStorage.setItem("SOURCE_ID",e),i(e)),Se(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{container:!0,className:n.container},r.a.createElement(A.a,{item:!0,sm:6,xs:12},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),ie(S),!1}},r.a.createElement(D.a,{className:n.root},r.a.createElement(E.a,{className:n.iconButton,"aria-label":"menu",onClick:function(e){Se(e.currentTarget)}},r.a.createElement(M.a,null)),r.a.createElement(ye.a,{anchorEl:je,keepMounted:!0,open:Boolean(je),onClose:Re},r.a.createElement(Ce.a,{disabled:"html"===l,onClick:function(){return Re("html")}},"T\u1eeb \u0111i\u1ec3n 1"),r.a.createElement(Ce.a,{disabled:"data"===l,onClick:function(){return Re("data")}},"T\u1eeb \u0111i\u1ec3n 2")),r.a.createElement(W.a,{value:S,onChange:function(e){return y(e.target.value)},className:n.input,placeholder:de?"N\xf3i t\u1eeb mu\u1ed1n t\xecm ki\u1ebfm":"Nh\u1eadp t\u1eeb mu\u1ed1n t\xecm",inputProps:{"aria-label":"English -> Vietnamese"}}),pe&&r.a.createElement(E.a,{disabled:de,onClick:function(){return fe()},className:n.iconButton,"aria-label":"voice input"},r.a.createElement(De.a,{color:de?"secondary":"inherit"})),r.a.createElement(E.a,{type:"submit",className:n.iconButton,"aria-label":"search"},r.a.createElement(z.a,null)),r.a.createElement(U.a,{className:n.divider,orientation:"vertical"}),r.a.createElement(E.a,{color:"primary",className:n.iconButton,"aria-label":"directions",onClick:function(){le(!0),y(""),p(null),t.push("/")}},r.a.createElement(te.a,null))))),ge&&r.a.createElement(A.a,{item:!0,sm:6,xs:12},r.a.createElement(F.a,{value:I,exclusive:!0,onChange:function(e,t){K(t)},style:{float:"right"},"aria-label":"select dictionary options"},r.a.createElement(P.a,{value:"en_vn","aria-label":"left aligned"},r.a.createElement(J.a,null)," Eng -> Vi \xa0"),r.a.createElement(P.a,{value:"en_en","aria-label":"centered"},r.a.createElement(G.a,null)," Eng -> Eng \xa0"),r.a.createElement(P.a,{value:"synonyms","aria-label":"right aligned"},r.a.createElement(Z.a,null)," \u0110\u1ed3ng Ngh\u0129a")))),ge&&r.a.createElement(A.a,null,r.a.createElement(A.a,{xs:12,item:!0},r.a.createElement(b.a,{variant:"h3",component:"span"},ge.data?oe(ge.data.word):""),r.a.createElement(b.a,{variant:"h4",component:"span"},r.a.createElement(T.a,{color:"text.secondary",component:"span"},ge.data&&ge.data.pronounce?"  (".concat(ge.data.pronounce,")"):"")),r.a.createElement(he,{word:ge.data.word,accents:["uk","us"],noStyle:!1}),r.a.createElement(U.a,{className:n.divider}),r.a.createElement(ne,{html:ge.data&&ge.data.content,onWordClick:be,onLinkClick:function(e){e.preventDefault();var t=e.currentTarget.href.split("/"),n=t[t.length-1];y(n),ie(n)}}),h&&r.a.createElement(ke,{word:h,onClose:function(){return g(null)}}),ge.suggests&&r.a.createElement(A.a,null,r.a.createElement(B,{suggests:ge.suggests,setKeyword:y,search:ie})))),X&&r.a.createElement(V.a,{className:n.snackbar,message:r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{variant:"subtitle2"},X),R&&R.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"C\xf3 th\u1ec3 b\u1ea1n quan t\xe2m :"),R.map((function(e){return r.a.createElement(xe.a,{key:e,style:{color:"#fff",cursor:"pointer"},onClick:function(){return ie(e)}},e)}))," ")),action:r.a.createElement(E.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){return $(null)}},r.a.createElement(Y.a,null))}),ce&&r.a.createElement(_e,{onWordClick:function(e){return ie(e)}}))},Ke=n(178),Me=n(85),qe=function(){return r.a.createElement(Me.a,{basename:""},r.a.createElement(p,null,r.a.createElement(Ke.a,{fixed:!0,className:"container-wrapper"},r.a.createElement(v,null),r.a.createElement(Ke.a,null,r.a.createElement(ae.c,null,r.a.createElement(ae.a,{path:"/:word"},r.a.createElement(Ve,null)),r.a.createElement(ae.a,{path:""},r.a.createElement(Ve,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(125);l.initializeApp({apiKey:"AIzaSyC0Afu4UrdUxEXpZSNtTX5dqB7Kiz9h-58",authDomain:"vndict-http.firebaseapp.com",databaseURL:"https://vndict-http.firebaseio.com",projectId:"vndict-http",storageBucket:"vndict-http.appspot.com",messagingSenderId:"395495785689",appId:"1:395495785689:web:becd3318f899758373aac8",measurementId:"G-27K3H2BHSN"}),l.analytics(),o.a.render(r.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},99:function(e,t,n){e.exports=n(126)}},[[99,1,2]]]);
//# sourceMappingURL=main.241e307e.chunk.js.map